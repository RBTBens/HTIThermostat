<div class="content">
	<div class="container">
		<table id="control-table">
			<tr>
				<td>
					<i id="control-min" class="fa fa-minus temp-control" onclick="changeValue(-1);"></i><br /><br />
					<i id="control-secondmin" class="fa fa-minus temp-control" onclick="changeValue(-0.1);"></i>
				</td>
				<td>
					<div id="slider-shape"></div><br />
					Status: <i id="control-time-indicator" class="fa fa-sun-o"></i><br />
					<div id="date_time"></div>
				</td>
				<td>
					<i id="control-plus" class="fa fa-plus temp-control" onclick="changeValue(1);"></i><br /><br />
					<i id="control-secondplus" class="fa fa-plus temp-control" onclick="changeValue(0.1);"></i>
				</td>
			</tr>
		</table>
		
		<div class="onoffswitch goprogram">
			<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="goprogram" onclick="window.location.hash='#scheduler';">
			<label class="onoffswitch-label" for="goprogram">
				<span class="onoffswitch-inner"></span>
			</label>
		</div>
		
		<div class="onoffswitch vacation" style="margin-top: 8px;">
			<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="vacation" onclick="changeMode(this);">
			<label class="onoffswitch-label" for="vacation">
				<span class="onoffswitch-inner"></span>
			</label>
		</div>
		
		<div class="onoffswitch daynight" style="margin-top: 8px;">
			<input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="daynight" onclick="changeDayNight(this);">
			<label class="onoffswitch-label" for="daynight">
				<span class="onoffswitch-inner"></span>
			</label>
		</div>
	</div>
</div>

<script type="text/javascript">
	// Load the slider
	$("#slider-shape").roundSlider({
		value: 0,
		min: 5,
		max: 30,
		step: 0.1,
		startAngle: 20,
		endAngle: "+320",
		radius: 70,
		width: 20,
		sliderType: "min-range",
		handleSize: "34,10",
		tooltipFormat: function(args) {
			return args.value + " &deg;C";
		},
		drag: function(args) {
			updateSliderColor((args.value - args.options.min) / (args.options.max - args.options.min));
		},
		change: function(args) {
			gl.setTargetTemperature(args.value);
			updateSliderColor((args.value - args.options.min) / (args.options.max - args.options.min));
		},
		create: function(args) {
			var value = gl.getTargetTemperature();
			this.setValue(value);
			updateSliderColor((value - args.options.min) / (args.options.max - args.options.min));
		}
	});
	
	// Date and time
	window.onload = date_time('date_time');
	
	// Change slider
	var slider = $("#slider-shape").data("roundSlider");
	function changeValue(dir) {
		if (slider._isReadOnly) return;
		slider.setValue(slider.getValue() + dir);
		gl.setTargetTemperature(slider.getValue());
		updateSliderColor((slider.getValue() - slider.options.min) / (slider.options.max - slider.options.min));
	}

	// Change vacation mode
	function changeMode(checkbox) {
		if (checkbox.checked)
		{
			slider.disable();
			slider.setValue(slider.options.min);
			gl.setTargetTemperature(slider.getValue());
			$(".temp-control").addClass("grayed");
		}
		else
		{
			slider.enable();
			$(".temp-control").removeClass("grayed");
		}
	}	
	
	// Change layout
	function changeDayNight(checkbox) {
		app.changeDayTime(!checkbox.checked);
	}
	
	// Update the color
	function updateSliderColor(p) {
		if (!p && !slider) return;
		p = p || (slider.getValue() - slider.options.min) / (slider.options.max - slider.options.min);
		var lerp = function(a, b, p) { return (1 - p) * a + p * b; };
		$(".rs-range-color").css("background-color", "rgb(" + Math.round(lerp(43, 192, p)) + "," + Math.round(lerp(178, 57, p)) + "," + Math.round(lerp(192, 43, p)) + ")");
	}
</script>